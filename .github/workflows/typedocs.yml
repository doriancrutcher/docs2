name: Update Typedoc Workflow

on:
  push:
    branches:
      - main

jobs:
  makedocs:
    update-typedocs:
      runs-on: ubuntu-latest

      steps:
        - name: Checkout docs repo
          uses: actions/checkout@v3
          with:
            repository: near/near-sdk-js
            ref: "develop"

        - name: Generate Documentation
          run: |
            ls -a
            cd near-sdk-js/packages/near-sdk-js/lib
            ls -a
            npx typedoc index.ts

        - name: Upload docs as Artifact
          uses: actions/upload-artifact@v3
          with:
            name: typedocs
            path: ./docs/
